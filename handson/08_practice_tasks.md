# 🏋️ Step 8: 実践タスク集

## 目標

- これまで学んだ内容を総合的に活用する
- 実践的なタスクを通じてスキルを定着させる

---

## 8.1 実践タスク一覧

| # | タスク | 難易度 | 使用スキル |
|---|--------|--------|-----------|
| 1 | 機能追加: clearCompleted | ⭐ | Agent Skills, TDD |
| 2 | 機能追加: editTodo | ⭐⭐ | Agent Skills, TDD |
| 3 | バグ修正 | ⭐⭐ | Subagents |
| 4 | リファクタリング | ⭐⭐⭐ | Rules, Commands |
| 5 | テストカバレッジ向上 | ⭐⭐ | Agent Skills |
| 6 | パフォーマンス改善 | ⭐⭐⭐ | Subagents |

---

## タスク 1: clearCompleted 機能の追加 ⭐

### 要件

完了済みの TODO を一括削除する機能を追加します。

### 仕様

```typescript
/**
 * 完了済みの TODO を全て削除する
 * @param todos - TODO の配列
 * @returns 未完了の TODO のみを含む配列
 */
function clearCompleted(todos: Todo[]): Todo[]
```

### テストケース

- 完了済みの TODO が削除される
- 未完了の TODO は残る
- 全て未完了の場合は変更なし
- 空配列の場合は空配列を返す

### 進め方

```
@handson/03_todo_app_spec.md を参照して、
clearCompleted 関数を TDD で実装してください。

1. handson/challenge/test/logic/todo.test.ts にテストを追加
2. テストが失敗することを確認
3. handson/challenge/src/logic/todo.ts に実装を追加
4. テストが成功することを確認
```

---

## タスク 2: editTodo 機能の追加 ⭐⭐

### 要件

TODO のタイトルを編集する機能を追加します。

### 仕様

```typescript
/**
 * TODO のタイトルを編集する
 * @param todos - TODO の配列
 * @param id - 編集する TODO の ID
 * @param newTitle - 新しいタイトル
 * @returns 更新された TODO 配列
 * @throws TODO が見つからない場合、タイトルが空の場合
 */
function editTodo(todos: Todo[], id: string, newTitle: string): Todo[]
```

### テストケース

- タイトルを編集できる
- 存在しない ID でエラー
- 空のタイトルでエラー
- 他の TODO は変更されない

### 進め方

```
/tdd-cycle
機能名: editTodo
ファイル: todo
```

---

## タスク 3: バグ修正 ⭐⭐

### シナリオ

以下のバグが報告されました。
Subagent を使って原因を調査し、修正してください。

### バグ報告

```
【バグ報告】
タイトル: addTodo で同じ ID が生成される場合がある

再現手順:
1. 連続して addTodo を呼び出す
2. 生成された TODO の ID を確認
3. 稀に同じ ID が生成される

期待される動作:
- 各 TODO にユニークな ID が付与される

実際の動作:
- 稀に ID が重複する
```

### 進め方

```
以下のバグを調査してください：
「addTodo で同じ ID が生成される場合がある」

タスク1（調査）:
- handson/challenge/src/logic/todo.ts の ID 生成ロジックを確認
- 問題の原因を特定

タスク2（修正）:
- ID 生成ロジックを改善
- テストを追加して再発を防止
```

---

## タスク 4: リファクタリング ⭐⭐⭐

### 要件

TODO 関連のコードをリファクタリングして、保守性を向上させます。

### 対象

- `handson/challenge/src/logic/todo.ts`

### リファクタリングポイント

1. **ID 生成の共通化** - 複数箇所で使われる ID 生成を関数に抽出
2. **エラーハンドリングの統一** - カスタムエラークラスの導入
3. **バリデーションの共通化** - 入力検証ロジックの抽出

### 進め方

```
/review-handson を実行して改善点を洗い出し、
その後リファクタリングを実施してください。

以下のルールに従ってください：
- テストは引き続き成功すること
- 機能の変更はしない
- コードの品質を向上させる
```

---

## タスク 5: テストカバレッジ向上 ⭐⭐

### 要件

現在のテストでカバーされていないケースを追加します。

### 対象

- `handson/challenge/test/logic/todo.test.ts`

### 追加すべきテスト

1. **境界値テスト**
   - 非常に長いタイトル
   - 空白のみのタイトル
   - 特殊文字を含むタイトル

2. **エッジケース**
   - 大量の TODO（1000件）
   - 同時に複数の操作

3. **異常系**
   - null/undefined の入力
   - 不正な型の入力

### 進め方

```
handson/challenge/test/logic/todo.test.ts のテストカバレッジを向上させてください。

以下のケースを追加：
- 境界値テスト（長いタイトル、空白のみ、特殊文字）
- エッジケース（大量データ）
- 異常系（不正な入力）
```

---

## タスク 6: パフォーマンス改善 ⭐⭐⭐

### シナリオ

TODO の数が増えると処理が遅くなるという報告がありました。
Subagent を使って分析し、改善してください。

### 要件

- 1000件の TODO でも高速に動作する
- 既存のテストが引き続き成功する

### 進め方

```
handson/challenge/src/logic/todo.ts のパフォーマンスを分析・改善してください。

タスク1（分析）:
- 各関数の計算量を分析
- ボトルネックを特定

タスク2（ベンチマーク）:
- パフォーマンステストを作成
- 現在の性能を測定

タスク3（改善）:
- 最適化を実施
- 改善後の性能を測定

結果をレポートしてください。
```

---

## 8.2 振り返りチェックリスト

全てのタスクを終えたら、以下を振り返りましょう：

### 学んだこと

- [ ] Agent Skills を使って効率的にコーディングできた
- [ ] Subagent を使ってタスクを分担できた
- [ ] Rules を使ってエージェントの振る舞いを制御できた
- [ ] Commands を使ってワークフローを自動化できた

### TDD について

- [ ] Red → Green → Refactor のサイクルを実践できた
- [ ] テストを先に書くことの利点を体感できた
- [ ] リファクタリングを安心して行えた

### 改善点

- [ ] エージェントへの依頼で工夫した点は？
- [ ] 困った点、うまくいかなかった点は？
- [ ] 次回試してみたいことは？

---

## 8.3 発展課題

さらに学びたい方向けの課題です：

### 課題 A: 永続化機能の追加

- LocalStorage への保存/読み込み
- 非同期処理のテスト

### 課題 B: UI の拡張

- 既存のReactコンポーネントの拡張
- 追加のコンポーネントテスト

### 課題 C: CI/CD 設定

- GitHub Actions でのテスト自動化
- カバレッジレポートの生成

---

## おわりに

このハンズオンで学んだスキルは、日々の開発で活用できます。
Cursor のエージェント機能を使いこなして、より効率的で品質の高い開発を目指しましょう！

### 参考リンク

- [Cursor 公式ドキュメント - Agent](https://docs.cursor.com/agent/overview)
- [Cursor 公式ドキュメント - Rules](https://docs.cursor.com/context/rules)
- [Cursor 公式ドキュメント - Commands](https://docs.cursor.com/agent/chat/commands)
